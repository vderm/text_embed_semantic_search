---
author: Vasken Dermardiros
categories: website
tags:
- prod
- programming
- improve
- research
title: k3s
links:
- https://k3s.io/
---

# k3s

[[containerization]]

+ Official page: <https://k3s.io/>
+ YouTube tutorial video: [Intro to k3s: Lightweight Kubernetes](https://www.youtube.com/watch?v=2LNxGVS81mE) from Rancher

+ k3s is a lightweight certified Kubernetes distro
+ built for production operations
+ 40 MB binary, 250MB memory consumption
+ SQLite, but can use PostgreSQL and other relational DBs
+ split:
  + server: runs control plane (api server, controller-manager, scheduler), master worker (kubelet)
  + agent: worker (kubelet)

Differences between k8s? Legacy and non-default features, alpha features, in-tree cloud providers, in-tree storage drivers, but adds simplified installation, SQLite3 support, TLS management, containerd over docker. Removed 3mil LOC via patches -> can redo this process on next iteration of k8s.

![k3s Architecture](../attachments/2021-08-04-09-30-34.png)

K3s for the edge: ARM! Setup on RaspPi: <https://youtu.be/2LNxGVS81mE?t=1985>

# k3OS

[k3os on github by rancher](https://github.com/rancher/k3os)

+ Value added: minimum required services since everything will run in containers anyway
+ Doesn't requre a package manager
+ Models infrastructure as code -> version control

vagrant.json files(?)

**makes sense in the edge case to have 100s of these machines running in a cluster!**

# k3s under the hood

+ Title: K3s Under the Hood: Building a Product-grade Lightweight Kubernetes Distro - Darren Shepherd
+ Youtube: <https://www.youtube.com/watch?v=-HchRyqNtkU>

+ Kubernetes distribution

## Commands

+ Run server
  + `k3s server -t ${TOKEN}`
+ Join agent
  + `k3s agent -s https://server:6443 -t ${TOKEN}`
+ Join server
  + `k3s server -s https://server:6443 -t ${TOKEN}`

**k3sup**: batch deploy to a cluster of raspberry pis

[//begin]: # "Autogenerated link references for markdown compatibility"
[containerization]: containerization.md "Containerization"
[//end]: # "Autogenerated link references"